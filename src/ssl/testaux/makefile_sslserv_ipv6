ipver := $(shell /sbin/ifconfig | grep inet6 )
uname := $(shell uname)

ifneq (0, $(words $(ipver)))
ifneq (Darwin, $(uname))

export CFLAGS = -O0 -g
export CPPFLAGS = -D__ENABLE_DIGICERT_SSL_SERVER__ \
 -D__ENABLE_DIGICERT_IPV6__ \
 -D__ENABLE_DIGICERT_SSL_CIPHER_SUITES_SELECT__ \
 -D__ENABLE_DIGICERT_SSL_ECDH_SUPPORT__ \
 -D__ENABLE_DIGICERT_SSL_ECDHE_SUPPORT__ \
 -D__ENABLE_DIGICERT_SSL_ECDH_ANON_SUPPORT__ \
 -D__ENABLE_DIGICERT_SSL_DH_ANON_SUPPORT__ \
 -D__ENABLE_DIGICERT_SSL_DHE_SUPPORT__ \
 -D__ENABLE_DIGICERT_SSL_PSK_SUPPORT__ \
 -D__ENABLE_DIGICERT_ECC__ \
 -D__ENABLE_DIGICERT_ECC_P192__ \
 -D__ENABLE_DES_CIPHER__ \
 -D__ENABLE_NIL_CIPHER__ \
 -D__ENABLE_DIGICERT_CHACHA20__ \
 -D__ENABLE_DIGICERT_POLY1305__ \
 -D__ENABLE_DIGICERT_GCM__ \
 -D__ENABLE_DIGICERT_CCM_8__ \
 -D__ENABLE_DIGICERT_CCM__ \
 -D__ENABLE_DIGICERT_AEAD_CIPHER__ \
 -D__ENABLE_DIGICERT_RSA_ALL_KEYSIZE__ \
 -D__ENABLE_DIGICERT_DER_CONVERSION__


LIBS = ../../ssl/ssl.a\
 ../../crypto/crypto.a\
 ../../asn1/asn1.a\
 ../../common/common.a\
 ../../crypto/crypto.a \
 ../../platform/platform.a

SRCS = ssl_serv.c ssl_serv_request.c

# included makefile that does most of the work
include ../../../unit_tests/makefile_testaux.inc

#include makefile to start and stop program
include ../../../unit_tests/makefile_runstopaux.inc

endif
endif

ifeq (0, $(words $(ipver)))

include ../../../unit_tests/makefile_nulltest.inc

endif

ifeq (Darwin, $(uname))

include ../../../unit_tests/makefile_nulltest.inc

endif
